{% load static %}
<!DOCTYPE html>
<html lang="en">

     <head>
          <meta charset="UTF-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <link rel="stylesheet" href="{% static 'comparision.css' %}">
          <title>Food Compare - Search</title>
     </head>

     <body>
          <nav>
               <div class="left">
                    <div class="logo">
                         <h1>FC</h1>
                    </div>
                    <div class="location" onclick="handleSidebar()">
                         <p id="locationHead">{{location.0}}</p>
                         <span id="locationSub">{{location.1}}</span>
                    </div>
               </div>
               <div class="right">
                    <ul>
                         <li>
                              <a href="../search/">
                                   <svg class="search" viewBox="5 -1 12 25" height="17" width="17" fill="#686b78">
                                        <path
                                             d="M17.6671481,17.1391632 L22.7253317,22.1973467 L20.9226784,24 L15.7041226,18.7814442 C14.1158488,19.8024478 12.225761,20.3946935 10.1973467,20.3946935 C4.56550765,20.3946935 0,15.8291858 0,10.1973467 C0,4.56550765 4.56550765,0 10.1973467,0 C15.8291858,0 20.3946935,4.56550765 20.3946935,10.1973467 C20.3946935,12.8789625 19.3595949,15.3188181 17.6671481,17.1391632 Z M10.1973467,17.8453568 C14.4212261,17.8453568 17.8453568,14.4212261 17.8453568,10.1973467 C17.8453568,5.97346742 14.4212261,2.54933669 10.1973467,2.54933669 C5.97346742,2.54933669 2.54933669,5.97346742 2.54933669,10.1973467 C2.54933669,14.4212261 5.97346742,17.8453568 10.1973467,17.8453568 Z">
                                        </path>
                                   </svg>
                                   Search
                              </a>
                         </li>
                         <li>
                              <a href="#">
                                   <svg class="_1GTCc" viewBox="6 0 12 24" height="19" width="18" fill="#686b78">
                                        <path
                                             d="M11.9923172,11.2463768 C8.81761115,11.2463768 6.24400341,8.72878961 6.24400341,5.62318841 C6.24400341,2.5175872 8.81761115,0 11.9923172,0 C15.1670232,0 17.740631,2.5175872 17.740631,5.62318841 C17.740631,8.72878961 15.1670232,11.2463768 11.9923172,11.2463768 Z M11.9923172,9.27536232 C14.0542397,9.27536232 15.7257581,7.64022836 15.7257581,5.62318841 C15.7257581,3.60614845 14.0542397,1.97101449 11.9923172,1.97101449 C9.93039471,1.97101449 8.25887628,3.60614845 8.25887628,5.62318841 C8.25887628,7.64022836 9.93039471,9.27536232 11.9923172,9.27536232 Z M24,24 L0,24 L1.21786143,19.7101449 L2.38352552,15.6939891 C2.85911209,14.0398226 4.59284263,12.7536232 6.3530098,12.7536232 L17.6316246,12.7536232 C19.3874139,12.7536232 21.1256928,14.0404157
                                             21.6011089,15.6939891 L22.9903494,20.5259906 C23.0204168,20.63057 23.0450458,20.7352884 23.0641579,20.8398867 L24,24 Z M21.1127477,21.3339312 L21.0851024,21.2122487 C21.0772161,21.1630075 21.0658093,21.1120821 21.0507301,21.0596341 L19.6614896,16.2276325 C19.4305871,15.4245164 18.4851476,14.7246377 17.6316246,14.7246377 L6.3530098,14.7246377 C5.4959645,14.7246377 4.55444948,15.4231177 4.32314478,16.2276325 L2.75521062,21.6811594 L2.65068631,22.0289855 L21.3185825,22.0289855 L21.1127477,21.3339312 Z">
                                        </path>
                                   </svg>
                                   Sign up
                              </a>
                         </li>
                    </ul>
               </div>
          </nav>

          <section class="restaurant">
               <div class="container">
                    <div class="imgContainer">
                         <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_264,h_288,c_fill/{{dataArr.cloudinaryImageId}}">
                    </div>
                    <div class="restDetails">
                         <div class="resName">
                              <h1>{{dataArr.name}}</h1>
                         </div>
                         <div class="cuisine">
                              <p>{% for data in dataArr.cuisines %}{{data}}, {%endfor%}</p>
                         </div>
                         <div class="address">
                              <p>{{dataArr.area}}, {{dataArr.city}}</p>
                         </div>
                         <div class="moreDetails">
                              <div class="rating">
                                   <span>{{dataArr.avgRating}}</span>
                                   <p>{{dataArr.totalRatingsString}}</p>
                              </div>
                              <div class="price">
                                   <span>{{dataArr.costForTwoMsg}}</span>
                              </div>
                         </div>
                    </div>
               </div>
          </section>

          <section class="comparision">
               <div class="swiggy">
                    <div class="logo">
                         <h1>Swiggy</h1>
                    </div>
                    <div class="offers">
                         {% for data in dataArr.offerMeta %}
                         <div class="offer" onclick="handleOffers()">
                              <p>{{data.header}}</p>
                         </div>
                         {%endfor%}
                    </div>
                    {% for data in finalData %}
                    <div class="dishes">
                         <div class="content">
                              <h1>{{data.0.0}}</h1>
                              {% if data.0.1 != 0 and data.0.1 != "-" %}
                              <p>₹{{data.0.1}}</p>
                              {%endif%}
                              <span>{{data.0.2}}</span>
                         </div>
                         {% if data.0.3 != "-" %}
                         <div class="img">
                              <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_264,h_288,c_fill/{{data.0.3}}" alt="">
                         </div>
                         {%endif%}
                    </div>
                    {%endfor%}
               </div>
               <div class="zomato">
                    <div class="logo">
                         <h1>Zomato</h1>
                    </div>
                    <div class="offers">
                         {% for data in dataArr.offerMeta %}
                         <div class="offer" onclick="handleOffers()">
                              <p>{{data.header}}</p>
                         </div>
                         {%endfor%}
                    </div>
                    {% for data in finalData %}
                    <div class="dishes">
                         <div class="content">
                              <h1>{{data.1.0}}</h1>
                              {% if data.1.1 != 0 and data.1.1 != "-" %}
                              <p>₹{{data.1.1}}</p>
                              {%endif%}
                              <span>{{data.1.2}}</span>
                         </div>
                         {% if data.1.3 != "-" %}
                         <div class="img">
                              <img src="{{data.1.3}}" alt="">
                         </div>
                         {%endif%}
                    </div>
                    {%endfor%}

               </div>
          </section>
          <hr style="border: 2px solid black;width : 80%; margin-top:30px; align-self: center; background-color: black; margin-left: 10%;margin-right: 10%;">
          <section class="comparision">
               <div class="swiggy">
                    {% for data in sfinalleftData %}
                    <div class="dishes">
                         <div class="content">
                              <h1>{{data.0.0}}</h1>
                              {% if data.0.1 != 0 and data.0.1 != "-" %}
                              <p>₹{{data.0.1}}</p>
                              {%endif%}
                              <span>{{data.0.2}}</span>
                         </div>
                         {% if data.0.3 != "-" %}
                         <div class="img">
                              <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_264,h_288,c_fill/{{data.0.3}}" alt="">
                         </div>
                         {%endif%}
                    </div>    
                    {%endfor%}
               </div>
               <div class="zomato">
                    {% for data in zfinalleftData %}
                    <div class="dishes">
                         <div class="content">
                              <h1>{{data.1.0}}</h1>
                              {% if data.1.1 != 0 and data.1.1 != "-" %}
                              <p>₹{{data.1.1}}</p>
                              {%endif%}
                              <span>{{data.1.2}}</span>
                         </div>
                         {% if data.1.3 != "-" %}
                         <div class="img">
                              <img src="{{data.1.3}}" alt="">
                         </div>
                         {%endif%}
                    </div>
                    {%endfor%}

               </div>
          </section>

          <div class="offerDetails" id="offerDetails">
               <div class="heading">
                    <h1>Offer Details</h1>
                    <img src="{% static '/img/close.png' %}" alt="close" onclick="handleCloseOffer()">
               </div>
               <div class="details">
                    <p>Get free delivery using Axis Neo and Miles & More Axis Bank Credit Cards</p>
                    <span>Valid on total value of items worth ₹200 or more.</span>
               </div>
               <div class="terms">
                    <ul>
                         <li>
                              <svg xmlns="http://www.w3.org/2000/svg" fill="#3AB757" width="14" height="14" viewBox="0 0 20 20" aria-labelledby="icon-svg-title- icon-svg-desc-" role="img" class="sc-rbbb40-0 kyPUnV"><g clip-path="url(#clip0)"><path d="M14.75 8.3125L9.25 13.8125C9.125 13.9375 8.9375 14.0625 8.75 14.0625C8.5625 14.0625 8.375 14 8.1875 13.8125L5.1875 10.8125C4.875 10.5 4.875 10.0625 5.1875 9.75C5.5 9.4375 5.9375 9.4375 6.25 9.75L8.75 12.1875L13.6875 7.25C14 6.9375 14.4375 6.9375 14.75 7.25C15.0625 7.5625 15.0625 8 14.75 8.3125ZM17.0625 2.9375C13.125 -1 6.8125 -1 2.9375 2.9375C-0.9375 6.8125 -0.9375 13.1875 2.9375 17.0625C6.875 21 13.1875 21 17.125 17.0625C21.0625 13.125 21 6.8125 17.0625 2.9375Z"></path></g><defs><clipPath id="clip0"><rect width="20" height="20"></rect></clipPath></defs></svg>
                              <p>Valid on total value of items worth ₹200 or more.</p>
                         </li>
                         <li>
                              <svg xmlns="http://www.w3.org/2000/svg" fill="#3AB757" width="15" height="15" viewBox="0 0 20 20" aria-labelledby="icon-svg-title- icon-svg-desc-" role="img" class="sc-rbbb40-0 kyPUnV"><g clip-path="url(#clip0)"><path d="M14.75 8.3125L9.25 13.8125C9.125 13.9375 8.9375 14.0625 8.75 14.0625C8.5625 14.0625 8.375 14 8.1875 13.8125L5.1875 10.8125C4.875 10.5 4.875 10.0625 5.1875 9.75C5.5 9.4375 5.9375 9.4375 6.25 9.75L8.75 12.1875L13.6875 7.25C14 6.9375 14.4375 6.9375 14.75 7.25C15.0625 7.5625 15.0625 8 14.75 8.3125ZM17.0625 2.9375C13.125 -1 6.8125 -1 2.9375 2.9375C-0.9375 6.8125 -0.9375 13.1875 2.9375 17.0625C6.875 21 13.1875 21 17.125 17.0625C21.0625 13.125 21 6.8125 17.0625 2.9375Z"></path></g><defs><clipPath id="clip0"><rect width="20" height="20"></rect></clipPath></defs></svg>
                              <p>Offer applicable on Axis Neo and Miles & More Axis Bank Credit Cards only.</p>
                         </li>
                         <li>
                              <svg xmlns="http://www.w3.org/2000/svg" fill="#3AB757" width="14" height="14" viewBox="0 0 20 20" aria-labelledby="icon-svg-title- icon-svg-desc-" role="img" class="sc-rbbb40-0 kyPUnV"><g clip-path="url(#clip0)"><path d="M14.75 8.3125L9.25 13.8125C9.125 13.9375 8.9375 14.0625 8.75 14.0625C8.5625 14.0625 8.375 14 8.1875 13.8125L5.1875 10.8125C4.875 10.5 4.875 10.0625 5.1875 9.75C5.5 9.4375 5.9375 9.4375 6.25 9.75L8.75 12.1875L13.6875 7.25C14 6.9375 14.4375 6.9375 14.75 7.25C15.0625 7.5625 15.0625 8 14.75 8.3125ZM17.0625 2.9375C13.125 -1 6.8125 -1 2.9375 2.9375C-0.9375 6.8125 -0.9375 13.1875 2.9375 17.0625C6.875 21 13.1875 21 17.125 17.0625C21.0625 13.125 21 6.8125 17.0625 2.9375Z"></path></g><defs><clipPath id="clip0"><rect width="20" height="20"></rect></clipPath></defs></svg>
                              <p>Offer valid twice per user during campaign period.</p>
                         </li>
                         <li>
                              <svg xmlns="http://www.w3.org/2000/svg" fill="#3AB757" width="14" height="14" viewBox="0 0 20 20" aria-labelledby="icon-svg-title- icon-svg-desc-" role="img" class="sc-rbbb40-0 kyPUnV"><g clip-path="url(#clip0)"><path d="M14.75 8.3125L9.25 13.8125C9.125 13.9375 8.9375 14.0625 8.75 14.0625C8.5625 14.0625 8.375 14 8.1875 13.8125L5.1875 10.8125C4.875 10.5 4.875 10.0625 5.1875 9.75C5.5 9.4375 5.9375 9.4375 6.25 9.75L8.75 12.1875L13.6875 7.25C14 6.9375 14.4375 6.9375 14.75 7.25C15.0625 7.5625 15.0625 8 14.75 8.3125ZM17.0625 2.9375C13.125 -1 6.8125 -1 2.9375 2.9375C-0.9375 6.8125 -0.9375 13.1875 2.9375 17.0625C6.875 21 13.1875 21 17.125 17.0625C21.0625 13.125 21 6.8125 17.0625 2.9375Z"></path></g><defs><clipPath id="clip0"><rect width="20" height="20"></rect></clipPath></defs></svg>
                              <p>Other T&Cs may apply.</p>
                         </li>
                    </ul>
               </div>
          </div>

       

          <div class="leftSidebar" id="leftSidebar">
               <div class="content">
                    <img src="{% static 'img/close.png' %}" alt="Close" onclick="handleCloseSidebar()">
                    <input onkeyup="locLister(this)" name="location" id="location" type="text" placeholder="Search for area, street name...">
                    <input name="pid" id="pid" type="text" hidden>
               </div>
               <div class="citiesContainer" id="citiesContainer">
               </div>
          </div>
          <script>
          priceChanger();
          function handleSidebar() {
               document.getElementById("leftSidebar").style.left = "0%";
          }
          function handleCloseSidebar() {
               document.getElementById("leftSidebar").style.left = "-50%";
          }
          function handleOffers() {
               document.getElementById("offerDetails").style.top = "50%";
          }
          function handleCloseOffer() {
               document.getElementById("offerDetails").style.top = "-50%";
          }function locLister(location)
          {
               var citiesContainer = document.getElementById("citiesContainer");
               var input = location.value;
               if(input == "")
               {
                    citiesContainer.innerHTML = "";
               }
               else
               {
                    fetch("/loactionFinder?location=" + input)
                    .then(response => response.json())
                    .then(data => {
                         console.log(data);
                         if(data["statusCode"] == 0)
                         {
                              citiesContainer.innerHTML = "";
                              for(var i = 0; i < 5; i++)
                              {
                                   var location = data["data"][i]["description"];
                                   var pid = data["data"][i]["place_id"];
                                   var name = data["data"][i]["structured_formatting"]["main_text"];
                                   citiesContainer.innerHTML += "<div id='city' class='city' onclick='locSetter(this)'><p hidden>"+pid+"</p><h1>" + name + "</h1><p >" + location + "</p></div>";
                              }
                         }
                    })
               }
          }
          function locSetter(element)
          {
               document.getElementById("location").value = element.childNodes[1].innerText;
               document.getElementById("pid").value = element.childNodes[0].innerText;
               input = document.getElementById("pid").value;
               fetch("/locToLoc?pid=" + input)
               .then(response => response.json())
               .then(data => {
                    console.log(data);
                    document.getElementById("locationHead").innerHTML = data[0];
                    document.getElementById("locationSub").innerHTML = data[1];
                    handleCloseSidebar();
                    var id = location.search.split('id=')[1];
                    location.href = "./?id="+id.toString();
               })
          }
     </script>
     </body>

</html>